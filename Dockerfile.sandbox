FROM node:22-slim

# Install Copilot CLI + tools needed by the agent (git for diffs, bash for tool execution)
RUN apt-get update && apt-get install -y --no-install-recommends ca-certificates git && \
    npm install -g @github/copilot@0.0.410 && npm cache clean --force && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

USER 1000
WORKDIR /workspace
ENTRYPOINT ["copilot"]
