#!/usr/bin/env bash
# Git pre-commit hook: runs ruff and mypy on staged Python files.
# Install: ln -sf ../../scripts/pre-commit .git/hooks/pre-commit
set -euo pipefail

# Determine execution context
if [[ "${PWD}" == /workspaces/* ]]; then
    # Inside devcontainer â€” run directly
    RUN=""
else
    # On host â€” run inside devcontainer
    RUN="devcontainer exec --workspace-folder ."
fi

echo "ğŸ” ruff check..."
$RUN uv run ruff check src/ tests/

echo "ğŸ” ruff format..."
$RUN uv run ruff format --check src/ tests/

echo "ğŸ” mypy..."
$RUN uv run mypy src/

echo "âœ… All checks passed"
